$(document).ready(()=>{$("#join-btn").click(()=>{const s=$("#join-input").val();$.get(`/room/${s}`).done(e=>{$("#msg").html(`Joining ${s}...`),window.location.replace(`/room/${s}`)}).fail(s=>{$("#msg").append(s.responseJSON.msg)})}),$("#login-btn").click(()=>e()),$("#logout").click(()=>$.get("/logout",()=>{window.location.replace("/login")})),$("#add-btn").click(()=>{$.post("/room",{room:$("#addinput").val()}).done(s=>{$("#msg").html(s.msg)}).fail(s=>{$("#msg").empty(),s.responseJSON.msg.forEach(s=>{$("#msg").append(s+"<br><br>")})})}),$("#priv-btn").click(()=>{const s=$("#priv-user-input").val(),e=$("#priv-input").val();$.ajax({url:"/user/"+escape(s),type:"PUT",data:{priv:e},success:s=>{$("#msg").html(s.msg)},error:s=>{$("#msg").empty(),s.responseJSON.msg.forEach(s=>{$("#msg").append(s)})}})}),$("#delete-btn").click(()=>{if(confirm("Are you sure about this? Once deleted, you cannot get the room back!")){const s=$("#delete-input").val();$.ajax({url:`/room/${s}`,type:"DELETE",success:e=>{$("#msg").html(e.msg),$(`#delete-input option[value='${s}']`).remove()},error:s=>{$("#msg").empty(),s.responseJSON.msg.forEach(s=>{$("#msg").append(s)})}})}}),$("#register-btn").click(()=>s()),$("#show").mousedown(()=>$("#password").attr("type","text")),$("#show-confirm").mousedown(()=>$("#confirm").attr("type","text")),$("#show").mouseup(()=>$("#password").attr("type","password")),$("#show-confirm").mouseup(()=>$("#confirm").attr("type","password"));const s=()=>{const s=$("#username").val(),e=$("#password").val(),o=$("#confirm").val();$.post("/user",{username:s,password:e,confirm:o}).done(s=>{$("#msg").html(s.msg),window.location.replace("/")}).fail(s=>{$("#msg").empty(),s.responseJSON.msg.forEach(s=>{$("#msg").append(s+"<br><br>")})})},e=()=>{$.ajax("/login",{type:"POST",data:{username:$("#username").val(),password:$("#password").val()},statusCode:{200:s=>{$("#msg").html(s.msg),window.location.replace("/")},429:s=>{$("#msg").html(s.responseText)},401:s=>{$("#msg").html(s.responseJSON.msg)},404:s=>{$("#msg").html(s.responseJSON.msg)}}})}});
